# Chat Client API
The ChatClient offers a fluent API for communicating with an AI Model. It supports both synchronous and reactive programming models.

### Key Features:

1. **Fluent API Methods**:
   - The API provides methods to build the different parts of a prompt, which is then sent to the AI model as input.
   - A prompt includes instructional text to guide the AI model’s output and behavior.

2. **Prompt Structure**:
   - Prompts consist of a collection of messages.
   - **User Messages**: Direct inputs from the user.
   - **System Messages**: Generated by the system to guide the conversation.

3. **Dynamic Message Content**:
   - Messages often contain placeholders that are substituted at runtime based on user input. This customization tailors the AI model’s response to the user's input.

4. **Prompt Options**:
   - Various options can be specified for a prompt, such as:
     - **AI Model Name**: The specific AI model to use.
     - **Temperature Setting**: Controls the randomness or creativity of the generated output.



## Creating a ChatClient
The ChatClient is created using a ChatClient.Builder object. You can obtain an autoconfigured ChatClient.Builder instance for any [ChatModel](/chat) Spring Boot autoconfiguration or create one programmatically.


### Using an autoconfigured ChatClient.Builder
In the most simple use case, Spring AI provides Spring Boot autoconfiguration, creating a prototype ChatClient.Builder bean for you to inject into your class. Here is a simple example of retrieving a String response to a simple user request.

```
@RestController
public class AzureChatController {
	
    private final AzureOpenAiChatModel chatModel;
    
    public AzureChatController(AzureOpenAiChatModel chatModel) {
        this.chatModel = chatClientBuilder.build();
    }

    @GetMapping("azure/ai/multimodality")
	  public String generateMultimodality(@RequestParam(value = "message", defaultValue = "Explain what do you see on this picture?") String question, @RequestParam(value = "modelName", defaultValue = "gpt-4-turbo-2024-04-09") String modelName,
			@RequestParam(value = "imageURL", defaultValue = "https://docs.spring.io/spring-ai/reference/_images/multimodal.test.png") String imageURL) throws MalformedURLException {
    	URL url = new URL(imageURL);
    	String response = ChatClient.create(chatModel).prompt()
    	        .options(AzureOpenAiChatOptions.builder().withDeploymentName(modelName).build())
    	        .user(u -> u.text(question).media(MimeTypeUtils.IMAGE_PNG, url))
    	        .call()
    	        .content();
    	return response;
    }

```

In this simple example, the user input sets the contents of the user message. The call method sends a request to the AI model, and the content method returns the AI model’s response as a String.


### Create a ChatClient programmatically

You can disable the ChatClient.Builder autoconfiguration by setting the property spring.ai.chat.client.enabled=false. This is useful if multiple chat models are used together. Then create a ChatClient.Builder instance for for every ChatModel programmatically:
```
ChatModel myChatModel = ... // usually autowired

ChatClient.Builder builder = ChatClient.builder(myChatModel);

// or create a ChatClient with the default builder settings:

ChatClient chatClient = ChatClient.create(myChatModel);

```

## ChatClient Responses
The ChatClient API offers several ways to format the response from the AI Model.

### Returning a ChatResponse
In progress ...
### Streaming Responses
In progress ...
### call() return values
In progress ...
### stream() return values
In progress ...
